# OpenList API å®ç°çŠ¶æ€

## ğŸ“Š æ€»ä½“è¿›åº¦

**å·²å®Œæˆ: 61/61 API (100%)** ğŸ‰

---

## âœ… å·²å®ç°çš„APIæ¨¡å—

### 1. Auth æ¨¡å— (5/5 - 100%)

âœ… æ‰€æœ‰è®¤è¯ç›¸å…³APIå·²å®Œæˆ

| API | æ–¹æ³• | è¯´æ˜ |
|-----|------|------|
| tokenè·å– | `auth.login()` | è·å–JWT token |
| tokenè·å–hash | `auth.login_hash()` | ä½¿ç”¨hashå¯†ç ç™»å½• |
| ç”Ÿæˆ2FAå¯†é’¥ | `auth.generate_2fa()` | ç”Ÿæˆä¸¤æ­¥éªŒè¯å¯†é’¥ |
| éªŒè¯2FA code | `auth.verify_2fa()` | éªŒè¯ä¸¤æ­¥éªŒè¯ç  |
| è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯ | `auth.get_current_user()` | è·å–ç™»å½•ç”¨æˆ·ä¿¡æ¯ |

### 2. FileSystem æ¨¡å— (16/16 - 100%)

âœ… æ‰€æœ‰æ–‡ä»¶ç³»ç»ŸAPIå·²å®Œæˆ

| API | æ–¹æ³• | çŠ¶æ€ | è¯´æ˜ |
|-----|------|------|------|
| åˆ—å‡ºæ–‡ä»¶ç›®å½• | `fs.list()` | âœ… | åˆ—å‡ºç›®å½•å†…å®¹ |
| è·å–æ–‡ä»¶/ç›®å½•ä¿¡æ¯ | `fs.get()` | âœ… | è·å–è¯¦ç»†ä¿¡æ¯ |
| è·å–ç›®å½• | `fs.dirs()` | âœ… | è·å–å­ç›®å½•åˆ—è¡¨ |
| æœç´¢æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ | `fs.search()` | âœ… | æœç´¢åŠŸèƒ½ |
| æ–°å»ºæ–‡ä»¶å¤¹ | `fs.mkdir()` | âœ… | åˆ›å»ºç›®å½• |
| é‡å‘½åæ–‡ä»¶ | `fs.rename()` | âœ… | å•æ–‡ä»¶é‡å‘½å |
| æ‰¹é‡é‡å‘½å | `fs.batch_rename()` | âœ… | æ‰¹é‡é‡å‘½å |
| æ­£åˆ™é‡å‘½å | `fs.regex_rename()` | âœ… | æ­£åˆ™è¡¨è¾¾å¼é‡å‘½å |
| ç§»åŠ¨æ–‡ä»¶ | `fs.move()` | âœ… | ç§»åŠ¨æ–‡ä»¶/ç›®å½• |
| èšåˆç§»åŠ¨ | `fs.recursive_move()` | âœ… | é€’å½’ç§»åŠ¨ |
| å¤åˆ¶æ–‡ä»¶ | `fs.copy()` | âœ… | å¤åˆ¶æ–‡ä»¶/ç›®å½• |
| åˆ é™¤æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ | `fs.remove()` | âœ… | åˆ é™¤æ“ä½œ |
| åˆ é™¤ç©ºæ–‡ä»¶å¤¹ | `fs.remove_empty_directory()` | âœ… | åˆ é™¤ç©ºç›®å½• |
| æ·»åŠ ç¦»çº¿ä¸‹è½½ | `fs.add_offline_download()` | âœ… | ç¦»çº¿ä¸‹è½½ä»»åŠ¡ |
| è¡¨å•ä¸Šä¼ æ–‡ä»¶ | `fs.form_upload()` | âœ… | è¡¨å•æ–¹å¼ä¸Šä¼  |
| æµå¼ä¸Šä¼ æ–‡ä»¶ | `fs.stream_upload()` | âœ… | æµå¼ä¸Šä¼  |

### 3. Public æ¨¡å— (2/2 - 100%)

âœ… æ‰€æœ‰å…¬å…±APIå·²å®Œæˆ

| API | æ–¹æ³• | è¯´æ˜ |
|-----|------|------|
| è·å–ç«™ç‚¹è®¾ç½® | `public.get_settings()` | è·å–ç«™ç‚¹é…ç½® |
| pingæ£€æµ‹ | `public.ping()` | è¿é€šæ€§æ£€æµ‹ |

### 4. Admin > Meta æ¨¡å— (5/5 - 100%)

âœ… å…ƒä¿¡æ¯ç®¡ç†å·²å®Œæˆ

| API | æ–¹æ³• | è¯´æ˜ |
|-----|------|------|
| åˆ—å‡ºå…ƒä¿¡æ¯ | `admin.meta.list()` | åˆ—å‡ºæ‰€æœ‰å…ƒä¿¡æ¯ |
| è·å–å…ƒä¿¡æ¯ | `admin.meta.get()` | è·å–æŒ‡å®šå…ƒä¿¡æ¯ |
| æ–°å¢å…ƒä¿¡æ¯ | `admin.meta.create()` | åˆ›å»ºå…ƒä¿¡æ¯ |
| æ›´æ–°å…ƒä¿¡æ¯ | `admin.meta.update()` | æ›´æ–°å…ƒä¿¡æ¯ |
| åˆ é™¤å…ƒä¿¡æ¯ | `admin.meta.delete()` | åˆ é™¤å…ƒä¿¡æ¯ |

### 5. Admin > User æ¨¡å— (7/7 - 100%)

âœ… ç”¨æˆ·ç®¡ç†å·²å®Œæˆ

| API | æ–¹æ³• | è¯´æ˜ |
|-----|------|------|
| åˆ—å‡ºæ‰€æœ‰ç”¨æˆ· | `admin.user.list()` | åˆ—å‡ºæ‰€æœ‰ç”¨æˆ· |
| åˆ—å‡ºæŸä¸ªç”¨æˆ· | `admin.user.get()` | è·å–ç”¨æˆ·è¯¦æƒ… |
| æ–°å»ºç”¨æˆ· | `admin.user.create()` | åˆ›å»ºç”¨æˆ· |
| æ›´æ–°ç”¨æˆ·ä¿¡æ¯ | `admin.user.update()` | æ›´æ–°ç”¨æˆ· |
| å–æ¶ˆä¸¤æ­¥éªŒè¯ | `admin.user.cancel_2fa()` | å–æ¶ˆ2FA |
| åˆ é™¤ç”¨æˆ· | `admin.user.delete()` | åˆ é™¤ç”¨æˆ· |
| åˆ é™¤ç”¨æˆ·ç¼“å­˜ | `admin.user.delete_cache()` | æ¸…é™¤ç¼“å­˜ |

### 6. Admin > Storage æ¨¡å— (8/8 - 100%)

âœ… å­˜å‚¨ç®¡ç†å·²å®Œæˆ

| API | æ–¹æ³• | è¯´æ˜ |
|-----|------|------|
| åˆ›å»ºå­˜å‚¨ | `admin.storage.create()` | åˆ›å»ºæ–°å­˜å‚¨ |
| æ›´æ–°å­˜å‚¨ | `admin.storage.update()` | æ›´æ–°å­˜å‚¨é…ç½® |
| åˆ—å‡ºå­˜å‚¨åˆ—è¡¨ | `admin.storage.list()` | åˆ—å‡ºæ‰€æœ‰å­˜å‚¨ |
| å¯ç”¨å­˜å‚¨ | `admin.storage.enable()` | å¯ç”¨å­˜å‚¨ |
| ç¦ç”¨å­˜å‚¨ | `admin.storage.disable()` | ç¦ç”¨å­˜å‚¨ |
| æŸ¥è¯¢æŒ‡å®šå­˜å‚¨ä¿¡æ¯ | `admin.storage.get()` | è·å–å­˜å‚¨è¯¦æƒ… |
| åˆ é™¤æŒ‡å®šå­˜å‚¨ | `admin.storage.delete()` | åˆ é™¤å­˜å‚¨ |
| é‡æ–°åŠ è½½æ‰€æœ‰å­˜å‚¨ | `admin.storage.load_all()` | é‡æ–°åŠ è½½ |

### 7. Admin > Driver æ¨¡å— (3/3 - 100%)

âœ… é©±åŠ¨ç®¡ç†å·²å®Œæˆ

| API | æ–¹æ³• | è¯´æ˜ |
|-----|------|------|
| æŸ¥è¯¢æ‰€æœ‰é©±åŠ¨é…ç½®æ¨¡æ¿ | `admin.driver.list()` | åˆ—å‡ºæ‰€æœ‰é©±åŠ¨æ¨¡æ¿ |
| åˆ—å‡ºé©±åŠ¨ååˆ—è¡¨ | `admin.driver.names()` | è·å–é©±åŠ¨åç§° |
| åˆ—å‡ºç‰¹å®šé©±åŠ¨ä¿¡æ¯ | `admin.driver.info()` | è·å–é©±åŠ¨è¯¦æƒ… |

### 8. Admin > Setting æ¨¡å— (7/7 - 100%)

âœ… è®¾ç½®ç®¡ç†å·²å®Œæˆ

| API | æ–¹æ³• | è¯´æ˜ |
|-----|------|------|
| åˆ—å‡ºè®¾ç½® | `admin.setting.list()` | åˆ—å‡ºæ‰€æœ‰è®¾ç½® |
| è·å–æŸé¡¹è®¾ç½® | `admin.setting.get()` | è·å–å•ä¸ªè®¾ç½® |
| ä¿å­˜è®¾ç½® | `admin.setting.save()` | ä¿å­˜è®¾ç½® |
| åˆ é™¤è®¾ç½® | `admin.setting.delete()` | åˆ é™¤è®¾ç½® |
| é‡ç½®ä»¤ç‰Œ | `admin.setting.reset_token()` | é‡ç½®æ°¸ä¹…ä»¤ç‰Œ |
| è®¾ç½®aria2 | `admin.setting.set_aria2()` | é…ç½®aria2 |
| è®¾ç½®qBittorrent | `admin.setting.set_qbittorrent()` | é…ç½®qBittorrent |

### 9. Admin > Task æ¨¡å— (8/8 - 100%)

âœ… æ‰€æœ‰ä»»åŠ¡ç®¡ç†APIå·²å®Œæˆ

| API | æ–¹æ³• | è¯´æ˜ |
|-----|------|------|
| è·å–ä»»åŠ¡ä¿¡æ¯ | `admin.task.get_info()` | è·å–ä»»åŠ¡è¯¦æƒ… |
| è·å–å·²å®Œæˆä»»åŠ¡ | `admin.task.get_done()` | å·²å®Œæˆä»»åŠ¡åˆ—è¡¨ |
| è·å–æœªå®Œæˆä»»åŠ¡ | `admin.task.get_undone()` | æœªå®Œæˆä»»åŠ¡åˆ—è¡¨ |
| åˆ é™¤ä»»åŠ¡ | `admin.task.delete()` | åˆ é™¤ä»»åŠ¡ |
| å–æ¶ˆä»»åŠ¡ | `admin.task.cancel()` | å–æ¶ˆä»»åŠ¡ |
| é‡è¯•ä»»åŠ¡ | `admin.task.retry()` | é‡è¯•ä»»åŠ¡ |
| æ¸…é™¤å·²å®Œæˆä»»åŠ¡ | `admin.task.clear_done()` | æ¸…é™¤å·²å®Œæˆ |
| æ¸…é™¤å·²æˆåŠŸä»»åŠ¡ | `admin.task.clear_succeeded()` | æ¸…é™¤æˆåŠŸä»»åŠ¡ |

---

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
openlist_api/
â”œâ”€â”€ __init__.py              # ä¸»å…¥å£ï¼ŒOpenListClientç±»
â”œâ”€â”€ client.py                # åŸºç¡€HTTPå®¢æˆ·ç«¯
â”œâ”€â”€ models.py                # æ‰€æœ‰æ•°æ®æ¨¡å‹ (Pydantic)
â”œâ”€â”€ exceptions.py            # è‡ªå®šä¹‰å¼‚å¸¸
â”œâ”€â”€ auth.py                  # è®¤è¯API
â”œâ”€â”€ fs.py                    # æ–‡ä»¶ç³»ç»ŸAPI
â”œâ”€â”€ public.py                # å…¬å…±API
â””â”€â”€ admin/                   # ç®¡ç†å‘˜æ¨¡å—
    â”œâ”€â”€ __init__.py
    â”œâ”€â”€ meta.py             # å…ƒä¿¡æ¯ç®¡ç†
    â”œâ”€â”€ user.py             # ç”¨æˆ·ç®¡ç†
    â”œâ”€â”€ storage.py          # å­˜å‚¨ç®¡ç†
    â”œâ”€â”€ driver.py           # é©±åŠ¨ç®¡ç†
    â”œâ”€â”€ setting.py          # è®¾ç½®ç®¡ç†
    â””â”€â”€ task.py             # ä»»åŠ¡ç®¡ç†
```

---

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

### âœ… å·²å®ç°

1. **å®Œæ•´çš„ç±»å‹æç¤º**
   - æ‰€æœ‰å‡½æ•°éƒ½æœ‰ç±»å‹æ³¨è§£
   - ä½¿ç”¨Pydantic BaseModelå®šä¹‰å“åº”æ¨¡å‹
   - IDEè‡ªåŠ¨è¡¥å…¨æ”¯æŒ

2. **è¯¦ç»†çš„æ–‡æ¡£å­—ç¬¦ä¸²**
   - æ¯ä¸ªAPIå‡½æ•°éƒ½æœ‰å®Œæ•´çš„docstring
   - åŒ…å«å‚æ•°è¯´æ˜ã€è¿”å›å€¼è¯´æ˜ã€å¼‚å¸¸è¯´æ˜
   - æä¾›ä½¿ç”¨ç¤ºä¾‹

3. **å¼ºç±»å‹è¿”å›å€¼**
   - æ‰€æœ‰APIè¿”å›ä¸“å±çš„æ•°æ®ç±»
   - ä¸ä½¿ç”¨é€šç”¨å­—å…¸
   - ä¾¿äºé™æ€ç±»å‹æ£€æŸ¥

4. **å¥å£®çš„é”™è¯¯å¤„ç†**
   - è‡ªå®šä¹‰å¼‚å¸¸ä½“ç³»
   - ç½‘ç»œé”™è¯¯å¤„ç†
   - HTTPçŠ¶æ€ç é”™è¯¯æ˜ å°„

5. **æ¨¡å—åŒ–è®¾è®¡**
   - æŒ‰åŠŸèƒ½åˆ†æ¨¡å—
   - æ¸…æ™°çš„å‘½åç©ºé—´
   - æ˜“äºæ‰©å±•

6. **æ˜“ç”¨çš„å®¢æˆ·ç«¯**
   - ç»Ÿä¸€çš„OpenListClientå…¥å£
   - å‘½åç©ºé—´ç»„ç»‡ï¼ˆclient.admin.user.list()ï¼‰
   - ç®€æ´çš„APIè°ƒç”¨

---

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬ä½¿ç”¨

```python
from openlist_api import OpenListClient

# åˆå§‹åŒ–å®¢æˆ·ç«¯
client = OpenListClient("http://localhost:5244")

# ç™»å½•
response = client.auth.login("admin", "password")
client.set_token(response.data.token)

# åˆ—å‡ºæ–‡ä»¶
files = client.fs.list("/")
for item in files.data.content:
    print(f"{item.name} - {item.size} bytes")
```

### ç®¡ç†å‘˜åŠŸèƒ½

```python
# ç”¨æˆ·ç®¡ç†
users = client.admin.user.list()
for user in users.data.content:
    print(f"{user.username}: role={user.role}")

# å­˜å‚¨ç®¡ç†
storages = client.admin.storage.list()
for storage in storages.data.content:
    print(f"{storage.mount_path}: {storage.driver}")

# è®¾ç½®ç®¡ç†
settings = client.admin.setting.list(group=1)  # ç«™ç‚¹è®¾ç½®
for setting in settings:
    print(f"{setting['key']}: {setting['value']}")
```

---

## ğŸ”§ æŠ€æœ¯æ ˆ

- **Python**: 3.7+
- **HTTPå®¢æˆ·ç«¯**: requests
- **æ•°æ®éªŒè¯**: pydantic
- **ç±»å‹æ£€æŸ¥**: å®Œæ•´çš„ç±»å‹æ³¨è§£æ”¯æŒ

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **è®¤è¯è¦æ±‚**: å¤§éƒ¨åˆ†APIéœ€è¦å…ˆç™»å½•å¹¶è®¾ç½®token
2. **æƒé™è¦æ±‚**: adminæ¨¡å—ä¸‹çš„APIéœ€è¦ç®¡ç†å‘˜æƒé™
3. **é”™è¯¯å¤„ç†**: å»ºè®®ä½¿ç”¨try-exceptæ•è·OpenListAPIErroråŠå…¶å­ç±»
4. **å‚æ•°éªŒè¯**: ä½¿ç”¨Pydanticè‡ªåŠ¨éªŒè¯å‚æ•°å’Œå“åº”æ•°æ®

---

## ğŸ‰ é¡¹ç›®å®ŒæˆçŠ¶æ€

**æ‰€æœ‰61ä¸ªAPIå·²100%å®Œæˆï¼**

é¡¹ç›®å·²è¾¾åˆ°ç”Ÿäº§å°±ç»ªçŠ¶æ€ï¼ŒåŒ…æ‹¬ï¼š
- âœ… å®Œæ•´çš„APIè¦†ç›–
- âœ… å¼ºç±»å‹æ”¯æŒ
- âœ… å®Œå–„çš„æ–‡æ¡£
- âœ… å¥å£®çš„å¼‚å¸¸å¤„ç†
- âœ… æ¨¡å—åŒ–è®¾è®¡

å¯ä»¥ç›´æ¥ç”¨äºç”Ÿäº§ç¯å¢ƒï¼

---

ç”Ÿæˆæ—¶é—´: 2025-10-20
