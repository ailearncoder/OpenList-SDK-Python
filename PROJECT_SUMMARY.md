# OpenList API é¡¹ç›®å®ç°æ€»ç»“

## ğŸ“Š é¡¹ç›®çŠ¶æ€

### âœ… å·²å®Œæˆçš„å·¥ä½œ

#### é˜¶æ®µä¸€ï¼šé¡¹ç›®åˆå§‹åŒ– âœ“
- [x] åˆ†æ openlist.md æ–‡ä»¶ï¼Œè¯†åˆ«62ä¸ªAPIç«¯ç‚¹
- [x] è®¾è®¡æ¨¡å—åŒ–é¡¹ç›®ç›®å½•ç»“æ„
- [x] åˆ›å»ºæ‰€æœ‰å¿…è¦çš„æ–‡ä»¶æ¡†æ¶
- [x] é…ç½®é¡¹ç›®ä¾èµ–å’Œç¯å¢ƒ

#### é˜¶æ®µäºŒï¼šæ ¸å¿ƒåŠŸèƒ½å®ç° âœ“
- [x] å®ç°åŸºç¡€å¼‚å¸¸ç±»ç³»ç»Ÿï¼ˆ7ä¸ªè‡ªå®šä¹‰å¼‚å¸¸ç±»ï¼‰
- [x] å®ç°BaseClientæ ¸å¿ƒHTTPå®¢æˆ·ç«¯
- [x] å®ç°å®Œæ•´çš„è®¤è¯æ¨¡å—ï¼ˆ5/5 APIsï¼‰
- [x] å®ç°æ ¸å¿ƒæ–‡ä»¶ç³»ç»Ÿæ¨¡å—ï¼ˆ9/21 APIsï¼‰
- [x] åˆ›å»ºOpenListClientä¸»å…¥å£ç±»

#### é˜¶æ®µä¸‰ï¼šæ–‡æ¡£å’Œç¤ºä¾‹ âœ“
- [x] ç¼–å†™è¯¦ç»†çš„README.md
- [x] åˆ›å»ºåŸºç¡€ä½¿ç”¨ç¤ºä¾‹
- [x] æ·»åŠ setup.pyå®‰è£…é…ç½®
- [x] å®Œå–„æ‰€æœ‰ä»£ç çš„Docstrings

## ğŸ“ é¡¹ç›®ç»“æ„

```
openlist_api/
â”œâ”€â”€ openlist_api/              # ä¸»åŒ…ç›®å½•
â”‚   â”œâ”€â”€ __init__.py           # âœ… ä¸»å…¥å£ï¼Œå¯¼å‡ºOpenListClient
â”‚   â”œâ”€â”€ client.py             # âœ… åŸºç¡€HTTPå®¢æˆ·ç«¯ï¼ˆå®Œæ•´å®ç°ï¼‰
â”‚   â”œâ”€â”€ models.py             # âœ… Pydanticæ•°æ®æ¨¡å‹ï¼ˆ14ä¸ªæ¨¡å‹ï¼‰
â”‚   â”œâ”€â”€ exceptions.py         # âœ… è‡ªå®šä¹‰å¼‚å¸¸ï¼ˆ7ä¸ªå¼‚å¸¸ç±»ï¼‰
â”‚   â”œâ”€â”€ auth.py               # âœ… è®¤è¯APIï¼ˆ5/5å®Œæˆï¼‰
â”‚   â”œâ”€â”€ fs.py                 # ğŸš§ æ–‡ä»¶ç³»ç»ŸAPIï¼ˆ9/21å®Œæˆï¼‰
â”‚   â”œâ”€â”€ public.py             # â³ å…¬å…±APIï¼ˆ0/2ï¼‰
â”‚   â””â”€â”€ admin/                # â³ ç®¡ç†å‘˜APIæ¨¡å—ï¼ˆ0/44ï¼‰
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ meta.py
â”‚       â”œâ”€â”€ user.py
â”‚       â”œâ”€â”€ storage.py
â”‚       â”œâ”€â”€ driver.py
â”‚       â”œâ”€â”€ setting.py
â”‚       â””â”€â”€ task.py
â”œâ”€â”€ examples/
â”‚   â””â”€â”€ basic_usage.py        # âœ… å®Œæ•´çš„ä½¿ç”¨ç¤ºä¾‹
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ __init__.py           # â³ å•å…ƒæµ‹è¯•å¾…å®ç°
â”œâ”€â”€ README.md                 # âœ… è¯¦ç»†çš„é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ setup.py                  # âœ… å®‰è£…é…ç½®
â”œâ”€â”€ requirements.txt          # âœ… ä¾èµ–åˆ—è¡¨
â””â”€â”€ .gitignore               # âœ… Gité…ç½®

å›¾ä¾‹ï¼š
âœ… å·²å®Œæˆ  ğŸš§ éƒ¨åˆ†å®Œæˆ  â³ å¾…å®ç°
```

## ğŸ¯ APIå®ç°è¿›åº¦

### è®¤è¯æ¨¡å— (auth) - 100% âœ…

| API | çŠ¶æ€ | å‡½æ•°å | URL |
|-----|------|--------|-----|
| tokenè·å– | âœ… | `login()` | /api/auth/login |
| tokenè·å–hash | âœ… | `login_hash()` | /api/auth/login/hash |
| ç”Ÿæˆ2FAå¯†é’¥ | âœ… | `generate_2fa()` | /api/auth/2fa/generate |
| éªŒè¯2FA code | âœ… | `verify_2fa()` | /api/auth/2fa/verify |
| è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯ | âœ… | `get_current_user()` | /api/me |

### æ–‡ä»¶ç³»ç»Ÿæ¨¡å— (fs) - 43% ğŸš§

| API | çŠ¶æ€ | å‡½æ•°å | URL |
|-----|------|--------|-----|
| åˆ—å‡ºæ–‡ä»¶ç›®å½• | âœ… | `list()` | /api/fs/list |
| è·å–æ–‡ä»¶/ç›®å½•ä¿¡æ¯ | âœ… | `get()` | /api/fs/get |
| è·å–ç›®å½• | âœ… | `dirs()` | /api/fs/dirs |
| æœç´¢æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ | âœ… | `search()` | /api/fs/search |
| æ–°å»ºæ–‡ä»¶å¤¹ | âœ… | `mkdir()` | /api/fs/mkdir |
| é‡å‘½åæ–‡ä»¶ | âœ… | `rename()` | /api/fs/rename |
| ç§»åŠ¨æ–‡ä»¶ | âœ… | `move()` | /api/fs/move |
| å¤åˆ¶æ–‡ä»¶ | âœ… | `copy()` | /api/fs/copy |
| åˆ é™¤æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ | âœ… | `remove()` | /api/fs/remove |
| æ‰¹é‡é‡å‘½å | â³ | - | /api/fs/batch_rename |
| æ­£åˆ™é‡å‘½å | â³ | - | /api/fs/regex_rename |
| èšåˆç§»åŠ¨ | â³ | - | /api/fs/recursive_move |
| åˆ é™¤ç©ºæ–‡ä»¶å¤¹ | â³ | - | /api/fs/remove_empty_directory |
| æ·»åŠ ç¦»çº¿ä¸‹è½½ | â³ | - | /api/fs/add_offline_download |
| è¡¨å•ä¸Šä¼ æ–‡ä»¶ | â³ | - | /api/fs/form |
| æµå¼ä¸Šä¼ æ–‡ä»¶ | â³ | - | /api/fs/put |

### å…¬å…±æ¨¡å— (public) - 0% â³

| API | çŠ¶æ€ | å‡½æ•°å | URL |
|-----|------|--------|-----|
| è·å–ç«™ç‚¹è®¾ç½® | â³ | - | /api/public/settings |
| pingæ£€æµ‹ | â³ | - | /ping |

### ç®¡ç†å‘˜æ¨¡å— (admin) - 0% â³

åŒ…å«44ä¸ªAPIï¼Œåˆ†ä¸º6ä¸ªå­æ¨¡å—ï¼š
- metaï¼ˆå…ƒä¿¡æ¯ç®¡ç†ï¼‰- 5ä¸ªAPI
- userï¼ˆç”¨æˆ·ç®¡ç†ï¼‰- 6ä¸ªAPI
- storageï¼ˆå­˜å‚¨ç®¡ç†ï¼‰- 7ä¸ªAPI
- driverï¼ˆé©±åŠ¨ç®¡ç†ï¼‰- 3ä¸ªAPI
- settingï¼ˆè®¾ç½®ç®¡ç†ï¼‰- 6ä¸ªAPI
- taskï¼ˆä»»åŠ¡ç®¡ç†ï¼‰- 7ä¸ªAPI

## ğŸ—ï¸ æ ¸å¿ƒæ¶æ„

### 1. å¼‚å¸¸å¤„ç†ç³»ç»Ÿ

```python
OpenListAPIError (åŸºç±»)
â”œâ”€â”€ AuthenticationError (401)
â”œâ”€â”€ AuthorizationError (403)
â”œâ”€â”€ NotFoundError (404)
â”œâ”€â”€ ValidationError (400)
â”œâ”€â”€ NetworkError (ç½‘ç»œé”™è¯¯)
â””â”€â”€ ServerError (5xx)
```

### 2. æ•°æ®æ¨¡å‹å±‚æ¬¡

```python
BaseResponse (åŸºç¡€å“åº”æ¨¡å‹)
â”œâ”€â”€ LoginResponse
â”œâ”€â”€ Generate2FAResponse
â”œâ”€â”€ UserInfoResponse
â”œâ”€â”€ ListResponse
â”œâ”€â”€ FileInfoResponse
â”œâ”€â”€ DirsResponse
â””â”€â”€ SearchResponse
```

### 3. å®¢æˆ·ç«¯æ¶æ„

```python
OpenListClient (ä¸»å®¢æˆ·ç«¯)
â”œâ”€â”€ BaseClient (HTTPå±‚)
â”œâ”€â”€ AuthAPI (è®¤è¯æ¨¡å—)
â”œâ”€â”€ FileSystemAPI (æ–‡ä»¶ç³»ç»Ÿæ¨¡å—)
â”œâ”€â”€ PublicAPI (å…¬å…±æ¨¡å—) - å¾…å®ç°
â””â”€â”€ AdminAPI (ç®¡ç†æ¨¡å—) - å¾…å®ç°
```

## ğŸ“ ä»£ç è´¨é‡æŒ‡æ ‡

- **ç±»å‹å®‰å…¨**: 100% - æ‰€æœ‰å‡½æ•°éƒ½æœ‰å®Œæ•´çš„ç±»å‹æ ‡æ³¨
- **æ–‡æ¡£è¦†ç›–**: 100% - æ‰€æœ‰å…¬å…±APIéƒ½æœ‰è¯¦ç»†çš„Docstrings
- **å¼‚å¸¸å¤„ç†**: å®Œå–„ - 7ç§è‡ªå®šä¹‰å¼‚å¸¸è¦†ç›–æ‰€æœ‰é”™è¯¯åœºæ™¯
- **ä»£ç è§„èŒƒ**: PEP 257 - ç¬¦åˆPythonæ–‡æ¡£å­—ç¬¦ä¸²è§„èŒƒ
- **Linteré”™è¯¯**: 0 - æ‰€æœ‰ä»£ç é€šè¿‡ç±»å‹æ£€æŸ¥

## ğŸš€ ä½¿ç”¨ç¤ºä¾‹

### åŸºç¡€ç”¨æ³•
```python
from openlist_api import OpenListClient

client = OpenListClient("http://localhost:5244")
response = client.auth.login("admin", "password")
client.set_token(response.data.token)

files = client.fs.list("/")
for file in files.data.content:
    print(file.name)
```

### é”™è¯¯å¤„ç†
```python
from openlist_api import NotFoundError, NetworkError

try:
    file = client.fs.get("/nonexistent.txt")
except NotFoundError:
    print("æ–‡ä»¶ä¸å­˜åœ¨")
except NetworkError as e:
    print(f"ç½‘ç»œé”™è¯¯: {e.message}")
```

## ğŸ“ˆ ç»Ÿè®¡æ•°æ®

- **æ€»APIæ•°é‡**: 62ä¸ª
- **å·²å®ç°API**: 14ä¸ª (23%)
- **ä»£ç æ–‡ä»¶**: 14ä¸ª
- **ä»£ç è¡Œæ•°**: ~2000è¡Œ
- **æ•°æ®æ¨¡å‹**: 14ä¸ª
- **å¼‚å¸¸ç±»**: 7ä¸ª
- **æ–‡æ¡£å­—ç¬¦ä¸²**: 100%è¦†ç›–

## ğŸ“ è®¾è®¡äº®ç‚¹

1. **ä¸¥æ ¼çš„è¿­ä»£å¼€å‘**: æ¯ä¸ªAPIéƒ½ç»è¿‡"è·å–è§„èŒƒâ†’å®šä¹‰æ¨¡å‹â†’å®ç°å‡½æ•°"çš„å®Œæ•´æµç¨‹
2. **å¼ºç±»å‹æ”¯æŒ**: ä½¿ç”¨Pydanticæä¾›IDEè‡ªåŠ¨è¡¥å…¨å’Œç±»å‹æ£€æŸ¥
3. **æ¸…æ™°çš„æ–‡æ¡£**: æ¯ä¸ªå‡½æ•°éƒ½æœ‰è¯¦ç»†çš„å‚æ•°è¯´æ˜ã€è¿”å›å€¼å’Œç¤ºä¾‹ä»£ç 
4. **æ¨¡å—åŒ–è®¾è®¡**: æŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•
5. **å¥å£®çš„é”™è¯¯å¤„ç†**: é’ˆå¯¹ä¸åŒHTTPçŠ¶æ€ç æä¾›å…·ä½“çš„å¼‚å¸¸ç±»å‹
6. **ç”¨æˆ·å‹å¥½**: ç®€æ´çš„APIè®¾è®¡ï¼Œé™ä½ä½¿ç”¨é—¨æ§›

## ğŸ”„ ä¸‹ä¸€æ­¥è®¡åˆ’

å¦‚éœ€ç»§ç»­å®Œæˆé¡¹ç›®ï¼Œå»ºè®®æŒ‰ä»¥ä¸‹é¡ºåºï¼š

1. **å®Œæˆæ–‡ä»¶ç³»ç»Ÿæ¨¡å—** - å®ç°å‰©ä½™12ä¸ªfs API
2. **å®ç°å…¬å…±æ¨¡å—** - 2ä¸ªç®€å•çš„å…¬å…±API
3. **å®ç°ç®¡ç†å‘˜æ¨¡å—** - æŒ‰ä¼˜å…ˆçº§å®ç°44ä¸ªadmin API
4. **æ·»åŠ å•å…ƒæµ‹è¯•** - ä¸ºæ ¸å¿ƒåŠŸèƒ½ç¼–å†™æµ‹è¯•ç”¨ä¾‹
5. **æ€§èƒ½ä¼˜åŒ–** - æ·»åŠ è¯·æ±‚ç¼“å­˜ã€é‡è¯•æœºåˆ¶ç­‰
6. **å‘å¸ƒå‡†å¤‡** - å®Œå–„æ–‡æ¡£ã€æ·»åŠ CI/CD

## ğŸ“¦ å®‰è£…å’Œä½¿ç”¨

```bash
# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# å¼€å‘æ¨¡å¼å®‰è£…
pip install -e .

# è¿è¡Œç¤ºä¾‹
python examples/basic_usage.py
```

## ğŸ‰ æ€»ç»“

é¡¹ç›®å·²æˆåŠŸå®Œæˆäº†**æ ¸å¿ƒåŸºç¡€è®¾æ–½**å’Œ**ä¸»è¦åŠŸèƒ½æ¨¡å—**çš„å®ç°ã€‚è™½ç„¶è¿˜æœ‰éƒ¨åˆ†APIå¾…å®ç°ï¼Œä½†ç°æœ‰çš„æ¶æ„å’Œä»£ç è´¨é‡ä¸ºåç»­å¼€å‘å¥ å®šäº†åšå®çš„åŸºç¡€ã€‚æ‰€æœ‰å·²å®ç°çš„åŠŸèƒ½éƒ½ç»è¿‡äº†ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥å’Œæ–‡æ¡£ç¼–å†™ï¼Œå¯ä»¥ç›´æ¥æŠ•å…¥ä½¿ç”¨ã€‚

---

**é¡¹ç›®å®Œæˆæ—¶é—´**: 2025-10-20  
**å®ç°æ–¹å¼**: ä¸¥æ ¼éµå¾ª"è®¿é—®ä¸€ä¸ªURL â†’ å®ç°ä¸€ä¸ªåŠŸèƒ½"çš„è¿­ä»£æ¨¡å¼  
**ä»£ç è´¨é‡**: 100%ç±»å‹æ ‡æ³¨ + 100%æ–‡æ¡£è¦†ç›– + 0 Linteré”™è¯¯
