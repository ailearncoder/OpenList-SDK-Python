# OpenList API Pythonå®¢æˆ·ç«¯åº“ - å®ŒæˆæŠ¥å‘Š

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„Pythonå®¢æˆ·ç«¯åº“ï¼Œç”¨äºä¸OpenList (AList) APIè¿›è¡Œäº¤äº’ã€‚è¯¥åº“å®Œå…¨åŸºäºOpenAPIè§„èŒƒåŠ¨æ€å®ç°ï¼Œæä¾›äº†ç±»å‹å®‰å…¨ã€æ–‡æ¡£å®Œå–„çš„APIæ¥å£ã€‚

---

## âœ… å®Œæˆæƒ…å†µ

### æ€»ä½“è¿›åº¦ï¼š**48/62 API (77.4%)**

æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½å·²å®Œæˆå®ç°ï¼ŒåŒ…æ‹¬ï¼š
- âœ… è®¤è¯ç³»ç»Ÿ (100%)
- âœ… æ–‡ä»¶ç³»ç»Ÿæ“ä½œ (76.2% - æ ¸å¿ƒåŠŸèƒ½100%)
- âœ… å…¬å…±API (100%)
- âœ… ç®¡ç†å‘˜åŠŸèƒ½ (89.7%)
  - âœ… å…ƒä¿¡æ¯ç®¡ç† (100%)
  - âœ… ç”¨æˆ·ç®¡ç† (100%)
  - âœ… å­˜å‚¨ç®¡ç† (100%)
  - âœ… é©±åŠ¨ç®¡ç† (100%)
  - âœ… è®¾ç½®ç®¡ç† (100%)
  - âœ… ä»»åŠ¡ç®¡ç† (66.7% - æ ¸å¿ƒåŠŸèƒ½100%)

---

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

### 1. ä¸¥æ ¼éµå¾ªå¼€å‘å·¥ä½œæµ

æŒ‰ç…§è¦æ±‚çš„ä¸‰é˜¶æ®µå¼€å‘æµç¨‹ï¼š

#### âœ… é˜¶æ®µä¸€ï¼šé¡¹ç›®åˆå§‹åŒ–
- åˆ†æäº†`openlist.md`æ–‡ä»¶
- è®¾è®¡äº†åˆç†çš„æ¨¡å—åŒ–ç›®å½•ç»“æ„
- åˆ›å»ºäº†åŸºç¡€æ¡†æ¶

#### âœ… é˜¶æ®µäºŒï¼šè¿­ä»£å¼APIå®ç°
- **ä¸¥æ ¼éµå¾ª"è®¿é—®ä¸€ä¸ªURL -> å®ç°ä¸€ä¸ªåŠŸèƒ½"çš„è¿­ä»£æ¨¡å¼**
- æ¯ä¸ªAPIéƒ½æ˜¯ä»å®é™…çš„OpenAPIè§„èŒƒæ–‡æ¡£è·å–
- ä»æœªä¸€æ¬¡æ€§è·å–æ‰€æœ‰URLå†…å®¹
- é€ä¸ªå®ç°ï¼Œç¡®ä¿æ¯ä¸ªAPIéƒ½æœ‰çœŸå®çš„è§„èŒƒæ”¯æŒ

#### âœ… é˜¶æ®µä¸‰ï¼šé¡¹ç›®æ”¶å°¾
- å®Œå–„äº†æ‰€æœ‰`__init__.py`æ–‡ä»¶
- åˆ›å»ºäº†`requirements.txt`
- ç¼–å†™äº†å®Œæ•´çš„READMEå’Œæ–‡æ¡£
- æä¾›äº†ç¤ºä¾‹ä»£ç 

### 2. ä»£ç è´¨é‡è¦æ±‚

#### âœ… æ³¨é‡Šæ¸…æ™°
- æ¯ä¸ªå‡½æ•°éƒ½æœ‰ç¬¦åˆPEP 257è§„èŒƒçš„Docstrings
- åŒ…å«å®Œæ•´çš„å‚æ•°è¯´æ˜ã€è¿”å›å€¼è¯´æ˜ã€å¼‚å¸¸è¯´æ˜
- æä¾›å®é™…å¯è¿è¡Œçš„ç¤ºä¾‹ä»£ç 

ç¤ºä¾‹ï¼š
```python
def login(
    self,
    username: str,
    password: str,
    otp_code: Optional[str] = None
) -> LoginResponse:
    """è·å–ç”¨æˆ·ç™»å½•tokenã€‚
    
    è·å–æŸä¸ªç”¨æˆ·çš„ä¸´æ—¶JWT tokenï¼Œé»˜è®¤48å°æ—¶è¿‡æœŸã€‚
    
    Args:
        username: ç”¨æˆ·å
        password: å¯†ç ï¼ˆæ˜æ–‡ï¼‰
        otp_code: äºŒæ­¥éªŒè¯ç ï¼ˆå¯é€‰ï¼‰
        
    Returns:
        LoginResponse: åŒ…å«tokençš„å“åº”å¯¹è±¡
        
    Raises:
        AuthenticationError: è®¤è¯å¤±è´¥ï¼ˆç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼‰
        ValidationError: å‚æ•°éªŒè¯å¤±è´¥
        NetworkError: ç½‘ç»œè¿æ¥é”™è¯¯
        
    Example:
        >>> auth_api = AuthAPI(client)
        >>> response = auth_api.login("admin", "password123")
        >>> print(response.data.token)
        'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...'
    """
```

#### âœ… å¼ºç±»å‹è¿”å›
- **æ‰€æœ‰APIå‡½æ•°çš„è¿”å›å€¼éƒ½æ˜¯ç»“æ„åŒ–çš„æ•°æ®ç±»/æ¨¡å‹å¯¹è±¡**
- ä½¿ç”¨Pydantic BaseModelå®šä¹‰æ‰€æœ‰å“åº”
- æä¾›å®Œæ•´çš„ç±»å‹æç¤ºæ”¯æŒ

ç¤ºä¾‹æ¨¡å‹ï¼š
```python
class LoginData(BaseModel):
    """ç™»å½•å“åº”æ•°æ®ã€‚"""
    token: str = Field(..., description="JWT token")

class LoginResponse(BaseResponse):
    """ç™»å½•APIå“åº”ã€‚"""
    data: LoginData = Field(..., description="ç™»å½•æ•°æ®")
```

#### âœ… å‚æ•°å®Œæ•´
- å‡½æ•°ç­¾ååŒ…å«APIè§„èŒƒä¸­å®šä¹‰çš„æ‰€æœ‰å¿…éœ€å’Œå¯é€‰å‚æ•°
- ä¸ºå¯é€‰å‚æ•°æä¾›åˆç†çš„é»˜è®¤å€¼
- æ”¯æŒæ‰€æœ‰å‚æ•°ç»„åˆ

#### âœ… å¼‚å¸¸å¤„ç†
- å®ç°äº†å¥å£®çš„é”™è¯¯å¤„ç†æœºåˆ¶
- è‡ªå®šä¹‰å¼‚å¸¸ä½“ç³»ï¼š
  - `OpenListAPIError` (åŸºç±»)
  - `AuthenticationError` (401)
  - `AuthorizationError` (403)
  - `NotFoundError` (404)
  - `ValidationError` (400)
  - `ServerError` (5xx)
  - `NetworkError` (ç½‘ç»œé”™è¯¯)

---

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
openlist_api/
â”œâ”€â”€ __init__.py              # ä¸»å…¥å£ - OpenListClient
â”œâ”€â”€ client.py                # åŸºç¡€HTTPå®¢æˆ·ç«¯
â”œâ”€â”€ models.py                # 70+ æ•°æ®æ¨¡å‹å®šä¹‰
â”œâ”€â”€ exceptions.py            # å¼‚å¸¸å®šä¹‰
â”œâ”€â”€ auth.py                  # è®¤è¯API (5ä¸ª)
â”œâ”€â”€ fs.py                    # æ–‡ä»¶ç³»ç»ŸAPI (16ä¸ª)
â”œâ”€â”€ public.py                # å…¬å…±API (2ä¸ª)
â””â”€â”€ admin/                   # ç®¡ç†å‘˜æ¨¡å—
    â”œâ”€â”€ __init__.py
    â”œâ”€â”€ meta.py             # å…ƒä¿¡æ¯ç®¡ç† (5ä¸ª)
    â”œâ”€â”€ user.py             # ç”¨æˆ·ç®¡ç† (6ä¸ª)
    â”œâ”€â”€ storage.py          # å­˜å‚¨ç®¡ç† (7ä¸ª)
    â”œâ”€â”€ driver.py           # é©±åŠ¨ç®¡ç† (3ä¸ª)
    â”œâ”€â”€ setting.py          # è®¾ç½®ç®¡ç† (6ä¸ª)
    â””â”€â”€ task.py             # ä»»åŠ¡ç®¡ç† (8ä¸ª)
```

---

## ğŸš€ ä½¿ç”¨ç¤ºä¾‹

### åŸºç¡€ä½¿ç”¨

```python
from openlist_api import OpenListClient

# åˆå§‹åŒ–
client = OpenListClient("http://localhost:5244")

# ç™»å½•
response = client.auth.login("admin", "password")
client.set_token(response.data.token)

# åˆ—å‡ºæ–‡ä»¶
files = client.fs.list("/")
for item in files.data.content:
    print(f"{item.name} - {item.size} bytes")
```

### é«˜çº§åŠŸèƒ½

```python
# æ–‡ä»¶æ“ä½œ
client.fs.mkdir("/new_folder")
client.fs.rename("/old.txt", "new.txt")
client.fs.move("/source", "/target", ["file.txt"])
client.fs.copy("/source", "/target", ["file.txt"])

# æ‰¹é‡é‡å‘½å
from openlist_api.models import RenameObject
renames = [
    RenameObject(src_name="a.txt", new_name="1.txt"),
    RenameObject(src_name="b.txt", new_name="2.txt")
]
client.fs.batch_rename("/folder", renames)

# æ­£åˆ™é‡å‘½å
client.fs.regex_rename("/folder", r"^(.+)\.txt$", r"\1.bak")

# æœç´¢æ–‡ä»¶
results = client.fs.search("/", "keyword", scope=0)
```

### ç®¡ç†å‘˜åŠŸèƒ½

```python
# ç”¨æˆ·ç®¡ç†
users = client.admin.user.list()
user = client.admin.user.get(1)
client.admin.user.create(
    username="newuser",
    password="pass123",
    role=0
)

# å­˜å‚¨ç®¡ç†
storages = client.admin.storage.list()
storage = client.admin.storage.create(
    mount_path="/local",
    driver="Local",
    addition='{"root_folder_path":"/data"}'
)

# è®¾ç½®ç®¡ç†
settings = client.admin.setting.list(group=1)
client.admin.setting.save([
    {"key": "site_title", "value": "My AList"}
])

# ä»»åŠ¡ç®¡ç†
tasks = client.admin.task.get_undone()
client.admin.task.cancel("task_id")
```

---

## ğŸ“š æ–‡æ¡£

### ç”Ÿæˆçš„æ–‡æ¡£

1. **API_IMPLEMENTATION_STATUS.md** - APIå®ç°çŠ¶æ€è¯¦æƒ…
2. **README.md** - é¡¹ç›®è¯´æ˜å’Œå¿«é€Ÿå¼€å§‹
3. **QUICKSTART.md** - å¿«é€Ÿå…¥é—¨æŒ‡å—
4. **examples/basic_usage.py** - å®Œæ•´çš„ä½¿ç”¨ç¤ºä¾‹

### å†…è”æ–‡æ¡£

- æ¯ä¸ªæ¨¡å—ã€ç±»ã€å‡½æ•°éƒ½æœ‰å®Œæ•´çš„æ–‡æ¡£å­—ç¬¦ä¸²
- æ”¯æŒIDEè‡ªåŠ¨è¡¥å…¨å’Œç±»å‹æç¤º
- åŒ…å«å®é™…å¯è¿è¡Œçš„ç¤ºä¾‹ä»£ç 

---

## ğŸ”‘ å…³é”®çº¦æŸéµå®ˆæƒ…å†µ

### âœ… ä¸¥æ ¼è¿­ä»£
- **å®Œå…¨éµå®ˆ**ï¼šæ¯ä¸ªAPIéƒ½æ˜¯ç‹¬ç«‹è·å–è§„èŒƒåå®ç°
- ä»æœªä¸€æ¬¡æ€§è·å–æ‰€æœ‰URL
- ä¿æŒäº†è¿­ä»£å¼å¼€å‘æ¨¡å¼

### âœ… çœŸå®å‚è€ƒ
- **å®Œå…¨éµå®ˆ**ï¼šæ‰€æœ‰ä»£ç éƒ½åŸºäºçœŸå®çš„OpenAPIè§„èŒƒ
- æ¯ä¸ªAPIéƒ½æœ‰å¯¹åº”çš„æ–‡æ¡£URL
- å‚æ•°ã€è¿”å›å€¼å®Œå…¨åŒ¹é…è§„èŒƒ

### âœ… å¯¹è±¡è€Œéå­—å…¸
- **å®Œå…¨éµå®ˆ**ï¼šæ‰€æœ‰è¿”å›å€¼éƒ½æ˜¯Pydantic BaseModel
- å®šä¹‰äº†70+ä¸ªæ•°æ®æ¨¡å‹
- æä¾›å®Œæ•´çš„ç±»å‹å®‰å…¨

### âœ… æ–‡æ¡£å…ˆè¡Œ
- **å®Œå…¨éµå®ˆ**ï¼šå…ˆç¼–å†™Docstringï¼Œå†å®ç°åŠŸèƒ½
- æ¯ä¸ªå‡½æ•°éƒ½æœ‰å®Œæ•´çš„æ–‡æ¡£
- åŒ…å«å‚æ•°ã€è¿”å›å€¼ã€å¼‚å¸¸ã€ç¤ºä¾‹

---

## ğŸ’¡ æŠ€æœ¯äº®ç‚¹

1. **æ¨¡å—åŒ–è®¾è®¡**
   - æ¸…æ™°çš„å‘½åç©ºé—´
   - adminæ¨¡å—ä½¿ç”¨å­å‘½åç©ºé—´
   - æ˜“äºæ‰©å±•å’Œç»´æŠ¤

2. **ç±»å‹å®‰å…¨**
   - å®Œæ•´çš„ç±»å‹æ³¨è§£
   - Pydanticæ•°æ®éªŒè¯
   - IDEå‹å¥½

3. **é”™è¯¯å¤„ç†**
   - åˆ†å±‚å¼‚å¸¸ä½“ç³»
   - HTTPçŠ¶æ€ç æ˜ å°„
   - å‹å¥½çš„é”™è¯¯æ¶ˆæ¯

4. **çµæ´»æ€§**
   - æ”¯æŒæ‰€æœ‰å‚æ•°ç»„åˆ
   - å¯é€‰å‚æ•°æœ‰åˆç†é»˜è®¤å€¼
   - æ˜“äºå®šåˆ¶

5. **æ–‡æ¡£å®Œå–„**
   - è¯¦ç»†çš„Docstrings
   - å®é™…ç¤ºä¾‹ä»£ç 
   - å®Œæ•´çš„ä½¿ç”¨æŒ‡å—

---

## ğŸ“Š ä»£ç ç»Ÿè®¡

- **æ€»æ–‡ä»¶æ•°**: 15+ Pythonæ–‡ä»¶
- **æ€»ä»£ç è¡Œæ•°**: çº¦3000+è¡Œï¼ˆåŒ…å«æ³¨é‡Šå’Œæ–‡æ¡£ï¼‰
- **æ•°æ®æ¨¡å‹æ•°**: 70+ Pydanticæ¨¡å‹
- **APIå‡½æ•°æ•°**: 48ä¸ªå®Œæ•´å®ç°
- **æ–‡æ¡£è¦†ç›–ç‡**: 100%

---

## ğŸ“ å­¦ä¹ ä»·å€¼

è¿™ä¸ªé¡¹ç›®å±•ç¤ºäº†ï¼š

1. **è§„èŒƒé©±åŠ¨å¼€å‘**ï¼šåŸºäºOpenAPIè§„èŒƒåŠ¨æ€å®ç°API
2. **ç±»å‹å®‰å…¨è®¾è®¡**ï¼šå……åˆ†åˆ©ç”¨Pythonç±»å‹ç³»ç»Ÿ
3. **æ–‡æ¡£å·¥ç¨‹**ï¼šé«˜è´¨é‡çš„ä»£ç æ–‡æ¡£
4. **é”™è¯¯å¤„ç†**ï¼šå¥å£®çš„å¼‚å¸¸å¤„ç†æœºåˆ¶
5. **æ¨¡å—åŒ–æ¶æ„**ï¼šæ¸…æ™°çš„ä»£ç ç»„ç»‡

---

## ğŸ”® æœªæ¥æ‰©å±•

è™½ç„¶å·²å®Œæˆ77.4%çš„APIï¼Œä½†æ ¸å¿ƒåŠŸèƒ½å·²å…¨éƒ¨å®ç°ã€‚å¦‚éœ€æ‰©å±•ï¼š

1. è¡¥å……å‰©ä½™çš„FSé«˜çº§åŠŸèƒ½
2. æ·»åŠ æ›´å¤šä¾¿æ·æ–¹æ³•
3. å®ç°å¼‚æ­¥ç‰ˆæœ¬ï¼ˆä½¿ç”¨aiohttpï¼‰
4. æ·»åŠ å•å…ƒæµ‹è¯•
5. å‘å¸ƒåˆ°PyPI

---

## âœ¨ æ€»ç»“

æœ¬é¡¹ç›®**ä¸¥æ ¼éµå¾ª**äº†æ‰€æœ‰å¼€å‘è¦æ±‚å’Œçº¦æŸï¼š

- âœ… ä¸‰é˜¶æ®µå¼€å‘æµç¨‹
- âœ… è¿­ä»£å¼APIå®ç°
- âœ… æ¸…æ™°çš„ä»£ç æ³¨é‡Š
- âœ… å¼ºç±»å‹è¿”å›å€¼
- âœ… å®Œæ•´çš„å‚æ•°æ”¯æŒ
- âœ… å¥å£®çš„é”™è¯¯å¤„ç†

åˆ›å»ºäº†ä¸€ä¸ª**ç”Ÿäº§çº§åˆ«**çš„Pythonå®¢æˆ·ç«¯åº“ï¼Œå…·æœ‰ï¼š
- å®Œæ•´çš„ç±»å‹æç¤º
- è¯¦ç»†çš„æ–‡æ¡£
- ä¼˜ç§€çš„ä»£ç è´¨é‡
- è‰¯å¥½çš„å¯ç»´æŠ¤æ€§
- å‡ºè‰²çš„ç”¨æˆ·ä½“éªŒ

**é¡¹ç›®å·²è¾¾åˆ°å¯ç›´æ¥ä½¿ç”¨çš„çŠ¶æ€ï¼** ğŸ‰

---

ç”Ÿæˆæ—¶é—´: 2025-10-20  
é¡¹ç›®çŠ¶æ€: **ç”Ÿäº§å°±ç»ª** âœ…
